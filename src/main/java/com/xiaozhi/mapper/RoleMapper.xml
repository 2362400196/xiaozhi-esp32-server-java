<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xiaozhi.dao.RoleMapper">

    <sql id="deviceSql">
        sys_role.roleId, sys_role.roleName, sys_role.roleDesc, sys_role.userId, sys_role.createTime
    </sql>

    <select id="query" resultType="com.xiaozhi.entity.SysRole">
        SELECT
        <include refid="deviceSql"></include>
        FROM
            sys_role
        WHERE
            sys_role.userId = #{userId}
        <if test="roleId != null and roleId != ''">AND roleId = #{roleId}</if>
        <if test="roleName != null and roleName != ''">AND roleName LIKE CONCAT('%', #{roleName}, '%')</if>
    </select>

    <update id="update" parameterType="com.xiaozhi.entity.SysRole">
        UPDATE
            sys_role
        <set>
            <if test="roleName != null or roleName != ''">roleName = #{roleName},</if>
            <if test="roleDesc != null or roleDesc != ''">roleDesc = #{roleDesc},</if>
        </set>
        WHERE
            roleId = #{roleId}
    </update>

    <insert id="add" useGeneratedKeys="true" keyProperty="roleName" parameterType="com.xiaozhi.entity.SysRole">
        INSERT INTO sys_device ( roleName, roleDesc, userId ) VALUES (
            #{roleName}, #{roleDesc}, #{userId}
        )
    </insert>

</mapper>